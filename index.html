<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Golf Tracker</title>

<style>
body{margin:0;background:#181818;color:#fff;font-family:system-ui,sans-serif;}
#scoreBar{position:fixed;top:0;left:0;right:0;height:44px;background:#111;display:none;align-items:center;justify-content:center;font-weight:600;z-index:10;}
.page{display:none;min-height:100vh;padding:72px 16px 72px;box-sizing:border-box;flex-direction:column;align-items:center;justify-content:center;gap:14px;text-align:center;}
.page.active{display:flex;}
button{width:100%;max-width:320px;height:52px;font-size:16px;border-radius:10px;border:none;font-weight:600;cursor:pointer;white-space:nowrap;color:#fff;-webkit-tap-highlight-color:transparent;}
.selected{box-shadow:0 0 0 3px #ffffffaa;}
.big{height:64px;font-size:17px;}
input{width:100%;max-width:320px;height:52px;background:#222;color:#fff;border-radius:10px;border:none;text-align:center;font-size:16px;}
.row{display:flex;gap:12px;width:100%;max-width:320px;}
.row button{flex:1;}
.input-wrap{position:relative;width:100%;max-width:320px;}
.input-wrap span{position:absolute;right:14px;top:50%;transform:translateY(-50%);color:#aaa;}
.back-wrap{position:fixed;bottom:16px;left:0;right:0;display:flex;justify-content:center;}
.back{background:#555;}

.holes9{background:#2e7d32;}
.holes18{background:#1565c0;}
.par3{background:#4fc3f7;}
.par4{background:#66bb6a;}
.par5{background:#ffb74d;}

.hole{background:#424242;}
.green{background:#43a047;outline:2px solid #a5d6a7;}
.fairway{background:#81c784;}
.bunker{background:#fbc02d;color:#000;}
.rough{background:#1b5e20;}
.danger{background:#c62828;}
.water{background:#1565c0;}

.stat{width:100%;max-width:360px;background:#222;padding:12px;border-radius:10px;font-size:15px;box-sizing:border-box;}
.stat.center{text-align:center;}
.stat-split{display:flex;}
.stat-half{flex:1;text-align:center;}
.stat-half.left{border-right:1px solid #333;}
.num{font-weight:700;}
.summary-title{text-decoration:underline;font-size:22px;font-weight:600;}
.score-summary{font-size:18px;font-weight:600;}
.round-meta{font-size:14px;opacity:.85;}
</style>
</head>

<body>

<div id="scoreBar">E through 0</div>

<div id="roundPage" class="page active">
  <input id="playerName" placeholder="Player Name">
  <input id="roundDate" type="date">
  <input id="courseName" placeholder="Course Name">
  <div class="row">
    <button class="holes9" onclick="highlight(this);selectPresetHoles(9)">9 Holes</button>
    <button class="holes18" onclick="highlight(this);selectPresetHoles(18)">18 Holes</button>
  </div>
  <input id="customHoles" type="number" min="3" max="18" placeholder="Custom # of Holes (3–18)">
  <button class="holes9" onclick="enterScoring()">CONFIRM</button>
</div>

<div id="parPage" class="page">
  <h3 id="holeHeader">Hole 1</h3>
  <button class="par3" onclick="highlight(this);setPar(3)">PAR 3</button>
  <button class="par4" onclick="highlight(this);setPar(4)">PAR 4</button>
  <button class="par5" onclick="highlight(this);setPar(5)">PAR 5</button>
  <div class="input-wrap"><input id="holeYards"><span>yards</span></div>
  <button class="holes9" onclick="startHole()">CONFIRM</button>
  <div class="back-wrap"><button class="back" onclick="goBack()">BACK</button></div>
</div>

<div id="shotPage" class="page">
  <h3>Tee Shot</h3>
  <button class="holes9" onclick="show('liePage')">SELECT LIE</button>
  <div class="back-wrap"><button class="back" onclick="goBack()">BACK</button></div>
</div>

<div id="liePage" class="page">
  <h3>Where did it end up?</h3>
  <button class="hole" onclick="highlight(this);selectLie('HOLE')">HOLE</button>
  <button class="green big" onclick="highlight(this);selectLie('GREEN')">GREEN</button>
  <div class="row">
    <button class="bunker" onclick="highlight(this);selectLie('GS BUNKER')">GS BUNKER</button>
    <button class="bunker" onclick="highlight(this);selectLie('FW BUNKER')">FW BUNKER</button>
  </div>
  <button class="fairway big" onclick="highlight(this);selectLie('FAIRWAY')">FAIRWAY</button>
  <div class="row">
    <button class="rough" onclick="highlight(this);selectLie('LEFT ROUGH')">LEFT ROUGH</button>
    <button class="rough" onclick="highlight(this);selectLie('RIGHT ROUGH')">RIGHT ROUGH</button>
  </div>
  <div class="row">
    <button class="danger" onclick="highlight(this);selectLie('OB')">OB</button>
    <button class="water" onclick="highlight(this);selectLie('WATER')">WATER</button>
  </div>
  <div class="back-wrap"><button class="back" onclick="goBack()">BACK</button></div>
</div>

<div id="distancePage" class="page">
  <h3 id="distanceTitle">2nd Shot Distance</h3>
  <div class="input-wrap"><input id="shotDistance" value="100"><span>yards</span></div>
  <button class="holes9" onclick="show('liePage')">CONFIRM</button>
  <div class="back-wrap"><button class="back" onclick="goBack()">BACK</button></div>
</div>

<div id="puttPage" class="page">
  <h3 id="puttTitle">Putt 1</h3>
  <div class="input-wrap"><input id="puttDistance" value="30"><span>feet</span></div>
  <button class="holes9" onclick="nextPutt()">CONFIRM PUTT</button>
  <button class="hole" onclick="holeOut()">HOLED OUT</button>
  <div class="back-wrap"><button class="back" onclick="goBack()">BACK</button></div>
</div>

<div id="summaryPage" class="page">
  <div class="summary-title">Round Summary</div>
  <div class="round-meta" id="roundMeta"></div>
  <div class="score-summary">
    <span class="num" id="sumScore"></span>
    (<span class="num" id="sumToPar"></span>)
    Par <span class="num" id="sumPar"></span>
  </div>

  <div class="stat">
    <div class="stat-split">
      <div class="stat-half left">Avg Score Par 3/4/5</div>
      <div class="stat-half">
        <span class="num" id="avgP3"></span> /
        <span class="num" id="avgP4"></span> /
        <span class="num" id="avgP5"></span>
      </div>
    </div>
  </div>

  <div class="stat center">
    Frwys <span class="num" id="fwHitS"></span>/<span class="num" id="fwOppS"></span>
    (<span class="num" id="fwPctS"></span>%)
    · Left <span class="num" id="fwLeftS"></span>
    (<span class="num" id="fwLeftPctS"></span>%)
    · Right <span class="num" id="fwRightS"></span>
    (<span class="num" id="fwRightPctS"></span>%)
  </div>

  <div class="stat">
    <div class="stat-split">
      <div class="stat-half left">
        GIR- <span class="num" id="girS"></span>/<span class="num" id="girTotS"></span>
        (<span class="num" id="girPctS"></span>%)
      </div>
      <div class="stat-half">
        Prox when GIR- <span class="num" id="proxGirS"></span> ft
      </div>
    </div>
  </div>

  <div class="stat">
    <div class="stat-split">
      <div class="stat-half left">
        Scrambling <span class="num" id="scrS"></span>/<span class="num" id="scrOppS"></span>
        (<span class="num" id="scrPctS"></span>%)
      </div>
      <div class="stat-half">
        Bunkers <span class="num" id="bunS"></span>/<span class="num" id="bunOppS"></span>
        (<span class="num" id="bunPctS"></span>%)
      </div>
    </div>
  </div>

  <div class="stat">
    <div class="stat-split">
      <div class="stat-half left" id="pph"></div>
      <div class="stat-half" id="ppg"></div>
    </div>
  </div>

  <div class="stat">
    <div class="stat-split">
      <div class="stat-half left" id="threePutts"></div>
      <div class="stat-half" id="onePuttPct"></div>
    </div>
  </div>
</div>

<script>
let historyStack=['roundPage'];
function show(id){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  if(historyStack[historyStack.length-1]!==id) historyStack.push(id);
}
function goBack(){
  if(historyStack.length>1){
    historyStack.pop();
    show(historyStack[historyStack.length-1]);
  }
}
function highlight(btn){
  btn.parentElement.querySelectorAll('button').forEach(b=>b.classList.remove('selected'));
  btn.classList.add('selected');
}

let totalHoles=null,currentHole=1;
let totalPar=0,totalStrokes=0;
let par=4,shots=0,putts=0;
let fwOpp=0,fwHit=0,fwLeft=0,fwRight=0;
let gir=0,girFirstPuttDist=0;
let scrOpp=0,scr=0;
let bunOpp=0,bun=0;
let p3=0,p4=0,p5=0,c3=0,c4=0,c5=0;
let firstPuttThisHole=null;
let girThisHole=false;
let totalPutts=0;
let girPutts=0;
let threePlusPutts=0;
let onePuttOpp=0;
let onePuttMade=0;

function selectPresetHoles(n){customHoles.value='';totalHoles=n;}
function enterScoring(){
  const c=parseInt(customHoles.value);
  totalHoles=(c>=3&&c<=18)?c:(totalHoles||9);
  scoreBar.style.display='flex';
  show('parPage');
}
function setPar(p){par=p;holeYards.value=p===3?150:p===4?400:520;}
function startHole(){shots=1;putts=0;firstPuttThisHole=null;girThisHole=false;show('shotPage');}
function ordinal(n){return n===1?'1st':n===2?'2nd':n===3?'3rd':`${n}th`;}

function selectLie(lie){
  if(shots===1&&(par===4||par===5)){
    fwOpp++;
    if(lie==='FAIRWAY')fwHit++;
    if(lie==='LEFT ROUGH')fwLeft++;
    if(lie==='RIGHT ROUGH')fwRight++;
  }
  if(lie==='GS BUNKER') bunOpp++;
  if(lie==='GREEN'){
    if(shots<=par-2){gir++;girThisHole=true;} else scrOpp++;
    putts=0;
    puttTitle.innerText='Putt 1';
    puttDistance.value=30;
    onePuttOpp++;
    show('puttPage');
    return;
  }
  if(lie==='HOLE'){finishHole();return;}
  shots++;
  distanceTitle.innerText=`${ordinal(shots)} Shot Distance`;
  shotDistance.value=100;
  show('distancePage');
}

function nextPutt(){
  totalPutts++;
  if(putts===0&&girThisHole) firstPuttThisHole=parseInt(puttDistance.value||0);
  putts++;
  puttTitle.innerText=`Putt ${putts+1}`;
  puttDistance.value=3;
}

function holeOut(){
  totalPutts++;
  if(putts===0){
    onePuttMade++;
    if(girThisHole) firstPuttThisHole=parseInt(puttDistance.value||0);
  }
  putts++;
  if(putts>=3) threePlusPutts++;
  if(girThisHole) girPutts+=putts;
  if(firstPuttThisHole!==null){girFirstPuttDist+=firstPuttThisHole;firstPuttThisHole=null;}
  if(shots>par-2&&putts===1) scr++;
  if(bunOpp>0&&putts===1) bun++;
  finishHole();
}

function finishHole(){
  const holeStrokes=shots+putts;
  if(par===3){c3++;p3+=holeStrokes;}
  if(par===4){c4++;p4+=holeStrokes;}
  if(par===5){c5++;p5+=holeStrokes;}
  totalStrokes+=holeStrokes;
  totalPar+=par;
  const d=totalStrokes-totalPar;
  scoreBar.innerText=d===0?`E through ${currentHole}`:`${d>0?'+':''}${d} through ${currentHole}`;
  if(currentHole<totalHoles){
    currentHole++;
    holeHeader.innerText=`Hole ${currentHole}`;
    show('parPage');
  }else{
    renderSummary();
    show('summaryPage');
  }
}

function renderSummary(){
  sumScore.innerText=totalStrokes;
  sumPar.innerText=totalPar;
  const d=totalStrokes-totalPar;
  sumToPar.innerText=d===0?'E':`${d>0?'+':''}${d}`;
  const dt=new Date(roundDate.value);
  roundMeta.innerText=`${playerName.value||'Player'} · ${courseName.value||'Course'} · ${dt.getMonth()+1}/${dt.getDate()}/${dt.getFullYear()}`;

  fwHitS.innerText=fwHit;fwOppS.innerText=fwOpp;fwPctS.innerText=fwOpp?Math.round(fwHit/fwOpp*100):0;
  fwLeftS.innerText=fwLeft;fwRightS.innerText=fwRight;
  fwLeftPctS.innerText=fwOpp?Math.round(fwLeft/fwOpp*100):0;
  fwRightPctS.innerText=fwOpp?Math.round(fwRight/fwOpp*100):0;

  girS.innerText=gir;girTotS.innerText=totalHoles;girPctS.innerText=totalHoles?Math.round(gir/totalHoles*100):0;
  proxGirS.innerText=gir?Math.round(girFirstPuttDist/gir):0;

  scrS.innerText=scr;scrOppS.innerText=scrOpp;scrPctS.innerText=scrOpp?Math.round(scr/scrOpp*100):0;
  bunS.innerText=bun;bunOppS.innerText=bunOpp;bunPctS.innerText=bunOpp?Math.round(bun/bunOpp*100):0;

  avgP3.innerText=c3?(p3/c3).toFixed(1):'–';
  avgP4.innerText=c4?(p4/c4).toFixed(1):'–';
  avgP5.innerText=c5?(p5/c5).toFixed(1):'–';

  pph.innerText=`Putts per Hole- ${(totalPutts/totalHoles).toFixed(1)}`;
  ppg.innerText=`Putts per GIR- ${gir?(girPutts/gir).toFixed(1):'–'}`;

  threePutts.innerText=`Three or more putts- ${threePlusPutts}`;
  onePuttPct.innerText=`One-Putt %- ${onePuttOpp?Math.round(onePuttMade/onePuttOpp*100):0}%`;
}
</script>

</body>
</html>

